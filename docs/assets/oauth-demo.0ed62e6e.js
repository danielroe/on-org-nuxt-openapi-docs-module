import{_ as J,a as F,b as G,c as V,d as H,e as M}from"./SearchBlock.3e19f150.js";import{_ as K}from"./client-only.45c4cd0b.js";import{f as Q,h as X,j as Y,r as A,k as s,g as Z,l as ee,c as oe,u as e,m as v,b as z,w as te,n as ne,o as d}from"./entry.4698dbd5.js";import{u as re}from"./vue.f36acd1f.e66bd35a.js";import{d as se}from"./docs.oauth-demo.config.8d70d0fc.js";import"./nuxt-link.d2cc8467.js";import"./OpenApiDropdown.6e2e3875.js";const C={openapi:"3.0.1",info:{title:"Identity Server",description:`<p>OAuth Demo using <a href="https://demo.duendesoftware.com/" target="_blank">IdentityServer</a></p>
`,version:"1.0"},servers:[{url:"https://demo.duendesoftware.com"}],components:{securitySchemes:{"short-lived-oauth":{type:"oauth2",description:"Provides an OAuth token thats valid for short duration ~75 seconds","x-client-id":"interactive.confidential.short","x-client-secret":"secret","x-default-scopes":"openid",flows:{authorizationCode:{authorizationUrl:"https://demo.duendesoftware.com/connect/authorize",tokenUrl:"https://demo.duendesoftware.com/connect/token",scopes:{openid:"OpenID",email:"Email",profile:"Profile"}}}},"long-lived-oauth":{type:"oauth2",description:"Provides an OAuth token thats valid for long durations",flows:{authorizationCode:{authorizationUrl:"https://demo.duendesoftware.com/connect/authorize",tokenUrl:"https://demo.duendesoftware.com/connect/token","x-client-id":"interactive.confidential","x-client-secret":"secret","x-default-scopes":"openid","x-pkce-only":!0,scopes:{openid:"OpenID",email:"Email",profile:"Profile"}}}}}},paths:{"/api/test":{get:{summary:"Test API",description:`This API needs an oAuth token with \`api\` scope. This information can also be found when you hover over Authentication info 
provided besides the lock icon in the top-right section of this operation. 
&lt;br/&gt;
Every operation which has security requiremnts will contain this icon and the details can be checked by hovering above it
`,security:[{"short-lived-oauth":null},{"long-lived-oauth":null}],responses:{200:{description:"Successful operation"}},tags:["other"]}},"/connect/userinfo":{get:{summary:"Get User Info",description:`This API needs an oAuth token with following one or more scopes
  - \`openid\`
  - \`email\`
  - \`profile\`

based on the scopes in the oAuth token, it will change the response shape. 
Give it a try by aquiring token with various scope combinations and check out the responses  
`,security:[{"short-lived-oauth":["openid","email","profile"]},{"long-lived-oauth":["openid","email","profile"]}],responses:{200:{description:"Successful operation"}},tags:["other"]}}},tags:{}},ae={class:"content-container"},me=Q({__name:"oauth-demo",setup(le){const m=X(),T=Y(),{$openapidoc:f,$openapidocBus:_,$openapidocRef:b}=ne(),k=A(""),I=A(0),y=A(se.path.toString()),n=A(C??{}),h=s(()=>"oauth-demo"),r=s(()=>m.params.type.toString()),O=s(()=>(m.params.mathod??"default").toString()),x=s(()=>r.value==="info"),S=s(()=>r.value==="auth"),P=s(()=>r.value==="components"),p=s(()=>f.currentLocale());b.setComponents(C.components),b.setDefinitions(C.definitions),b.setDocPath(y.value),b.setFile(h.value);const a=s(()=>{if(!n.value.paths)return null;for(let t in n.value.paths){let o=t;if(o.startsWith("/")&&(o=o.substring(1)),o.endsWith("/")&&(o=o.substring(-1)),o=o.replace(/[/\\.?+=&{}]/gumi,"_").replace(/__+/,"_"),o===O.value)return k.value=t,n.value.paths[t]??null}return null}),l=s(()=>{if(!n.value.webhooks)return null;for(let t in n.value.webhooks){let o=t;if(o.startsWith("/")&&(o=o.substring(1)),o.endsWith("/")&&(o=o.substring(-1)),o=o.replace(/[/\\.?+=&{}]/gumi,"_").replace(/__+/,"_"),o===O.value)return k.value=t,n.value.webhooks[t][r.value]??null}return null}),c=s(()=>a.value?a.value[r.value]??null:null),D=s(()=>a.value?a.value.parameters??null:null),j=s(()=>{const t=f.currentLocale()??"";return x.value?"[oauth-demo] - Info Docs":S.value?"[oauth-demo] - Authorization":P.value?"[oauth-demo] - Components Docs":c.value?"[oauth-demo] - "+(c.value["x-summary-"+t.value]||c.value.summary||""):""}),E=s(()=>{const t=f.currentLocale()??"";return x.value?"[oauth-demo] - Info Docs":S.value?"[oauth-demo] - Authorization":P.value?"[oauth-demo] - Components Docs":c.value&&(c.value["x-description-"+t.value]||c.value.description)||""});re({title:j.value,meta:[{name:"description",content:E.value}],htmlAttrs:{lang:p.value},bodyAttrs:{class:"oapi"}});const U=s(()=>{if(a.value){if(a.value.servers&&a.value.servers[0])return a.value.servers[0].url??null;if(a.value[r.value]&&a.value[r.value].servers&&a.value[r.value].servers[0])return a.value[r.value].servers[0].url??null}if(l.value){if(l.value.servers&&l.value.servers[0])return l.value.servers[0].url??null;if(l.value[r.value]&&l.value[r.value].servers&&l.value[r.value].servers[0])return l.value[r.value].servers[0].url??null}let t=I.value;if(t>0&&n.value.servers&&!n.value.servers[t]&&(t=0),!n.value.servers||!n.value.servers[t])return"";if(n.value.servers[t].variables){const o=Object.values(n.value.servers[t].variables)??[];if(o&&o.length)return o[0].default}return n.value.servers[t].url??""});function L(t){I.value=t}function $(){var o;(((o=document.querySelector(".content-container"))==null?void 0:o.querySelectorAll("h1[id], h2[id], h3[id], h4[id]"))??[]).forEach(u=>{u.addEventListener("click",i=>{const g=u.getAttribute("id"),w=window.location.origin+window.location.pathname+"#"+g;f.copyToClipboard(w,i,!1),T.push({path:m.path,hash:"#"+g}),setTimeout(()=>{u.scrollIntoView({behavior:"smooth",block:"start"})},100)})})}function B(){if(m.hash)return;const t=document.querySelector(".oapi-content");t&&(t.scrollTop=0)}function R(){const t=JSON.stringify(n.value,null,4),o=new Blob([t],{type:"application/json"}),u=URL.createObjectURL(o),i=document.createElement("a");i.href=u,i.download=h.value+".json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(u)}return Z(()=>{_.$on("downloadJsonDoc",R),_.$on("changeServer",L),B(),$()}),ee(()=>{_.$off("downloadJsonDoc",R),_.$off("changeServer",L)}),(t,o)=>{const u=J,i=F,g=G,w=V,q=M,N=H,W=K;return d(),oe("div",ae,[e(x)&&e(n).info?(d(),v(u,{key:0,info:e(n).info,servers:e(n).servers,"current-locale":e(p)},null,8,["info","servers","current-locale"])):e(S)&&e(n).components?(d(),v(i,{key:1,components:e(n).components,"current-locale":e(p)},null,8,["components","current-locale"])):e(P)&&e(n).components?(d(),v(g,{key:2,components:e(n).components,"current-locale":e(p)},null,8,["components","current-locale"])):e(c)?(d(),v(w,{key:3,route:e(c),"current-locale":e(p),method:e(r),components:e(n).components,url:e(k),path_doc:e(y),file:e(h),server:e(U),"sub-params":e(D)},null,8,["route","current-locale","method","components","url","path_doc","file","server","sub-params"])):e(l)?(d(),v(w,{key:4,route:e(l),"current-locale":e(p),method:e(r),components:e(n).components,url:e(k),path_doc:e(y),file:e(h),server:e(U),"sub-params":e(D)},null,8,["route","current-locale","method","components","url","path_doc","file","server","sub-params"])):(d(),v(q,{key:5})),z(W,null,{default:te(()=>[z(N,{"current-locale":e(p),doc:e(n),path:e(y),file:e(h)},null,8,["current-locale","doc","path","file"])]),_:1})])}}});export{me as default};
