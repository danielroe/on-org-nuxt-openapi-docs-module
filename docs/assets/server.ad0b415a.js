import{_ as J,a as z,b as F,c as Q,d as H,e as M}from"./SearchBlock.3e19f150.js";import{_ as G}from"./client-only.45c4cd0b.js";import{f as K,h as X,j as Y,r as A,k as l,g as Z,l as ss,c as es,u as s,m as h,b as T,w as ns,n as as,o as v}from"./entry.4698dbd5.js";import{u as ts}from"./vue.f36acd1f.e66bd35a.js";import{d as ls}from"./docs.server.config.5f868fc0.js";import"./nuxt-link.d2cc8467.js";import"./OpenApiDropdown.6e2e3875.js";const S={openapi:"3.0.2",info:{version:"1.0",title:"API Server templating using variables",description:`<p>Various ways to define API servers in the spec including variables</p>
<pre><code class="hljs language-yaml">  <span class="hljs-attr">servers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">&#x27;http://example.com/api&#x27;</span>
      <span class="hljs-attr">description:</span> <span class="hljs-string">Test</span> <span class="hljs-string">server</span> <span class="hljs-string">(just</span> <span class="hljs-string">for</span> <span class="hljs-string">example)</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">&#x27;/api&#x27;</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">&#x27;{protocol}://dev.com/api/{version}&#x27;</span>
      <span class="hljs-attr">variables:</span>
        <span class="hljs-attr">protocol:</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">Protocol</span> <span class="hljs-string">(with</span> <span class="hljs-string">enum)</span>
          <span class="hljs-attr">default:</span> <span class="hljs-string">https</span>
          <span class="hljs-attr">enum:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">http</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">https</span>
        <span class="hljs-attr">version:</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">API</span> <span class="hljs-string">Version</span> <span class="hljs-string">(without</span> <span class="hljs-string">enum)</span>
          <span class="hljs-attr">default:</span> <span class="hljs-string">v1</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">&#x27;{protocol}://{environment}.example.com/{version}&#x27;</span>
      <span class="hljs-attr">variables:</span>
        <span class="hljs-attr">environment:</span>
          <span class="hljs-attr">default:</span> <span class="hljs-string">api</span>    <span class="hljs-comment"># Production server</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">&gt;
            Server choices:
            * \`api\` Production (this is the default).
            * \`api.qa\` QA server.
            * \`api.dev\` Development server.
</span>          <span class="hljs-attr">enum:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">api</span>      <span class="hljs-comment"># Production server</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">api.dev</span>  <span class="hljs-comment"># Development server</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">api.qa</span>   <span class="hljs-comment"># Testing server</span>
        <span class="hljs-attr">protocol:</span>
          <span class="hljs-attr">default:</span> <span class="hljs-string">https</span>
          <span class="hljs-attr">enum:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">http</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">https</span>
        <span class="hljs-attr">version:</span>
          <span class="hljs-attr">default:</span> <span class="hljs-string">v2</span>
          <span class="hljs-attr">enum:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">v1</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">v2</span>
</code></pre>
`},servers:[{url:"http://example.com/api",description:"Test server (just for example)"},{url:"{protocol}://dev.com/api/{version}",variables:{protocol:{description:"Protocol (with enum)",default:"https",enum:["http","https"]},version:{description:"API Version (without enum)",default:"v1"}}},{url:"{protocol}://{environment}.example.com/{version}",variables:{environment:{default:"api",description:"Server choices:\n * `api` Production (this is the default).\n * `api.qa` QA server.\n * `api.dev` Development server.\n",enum:["api","api.dev","api.qa"]},protocol:{default:"https",enum:["http","https"]},version:{default:"v2",enum:["v1","v2"]}}}],paths:{"/api-server-template":{get:{summary:"Dynamic API Server.",description:"Uses API server template string and variables which can be used to generatea a desired API server url -  The selected and computed API Server URL should be shown against `API SERVER`.",responses:{200:{description:"successful operation",content:{"application/json":{schema:{type:"object",properties:{name:{description:"Person Name",type:"string"},age:{description:"Person Age",type:"integer"}}}}}}},tags:["other"]}}},tags:{}},rs={class:"content-container"},ds=K({__name:"server",setup(os){const d=X(),q=Y(),{$openapidoc:f,$openapidocBus:j,$openapidocRef:_}=as(),g=A(""),I=A(0),b=A(ls.path.toString()),a=A(S??{}),m=l(()=>"server"),t=l(()=>d.params.type.toString()),C=l(()=>(d.params.mathod??"default").toString()),P=l(()=>t.value==="info"),w=l(()=>t.value==="auth"),k=l(()=>t.value==="components"),i=l(()=>f.currentLocale());_.setComponents(S.components),_.setDefinitions(S.definitions),_.setDocPath(b.value),_.setFile(m.value);const r=l(()=>{if(!a.value.paths)return null;for(let n in a.value.paths){let e=n;if(e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(-1)),e=e.replace(/[/\\.?+=&{}]/gumi,"_").replace(/__+/,"_"),e===C.value)return g.value=n,a.value.paths[n]??null}return null}),o=l(()=>{if(!a.value.webhooks)return null;for(let n in a.value.webhooks){let e=n;if(e.startsWith("/")&&(e=e.substring(1)),e.endsWith("/")&&(e=e.substring(-1)),e=e.replace(/[/\\.?+=&{}]/gumi,"_").replace(/__+/,"_"),e===C.value)return g.value=n,a.value.webhooks[n][t.value]??null}return null}),u=l(()=>r.value?r.value[t.value]??null:null),D=l(()=>r.value?r.value.parameters??null:null),U=l(()=>{const n=f.currentLocale()??"";return P.value?"[server] - Info Docs":w.value?"[server] - Authorization":k.value?"[server] - Components Docs":u.value?"[server] - "+(u.value["x-summary-"+n.value]||u.value.summary||""):""}),$=l(()=>{const n=f.currentLocale()??"";return P.value?"[server] - Info Docs":w.value?"[server] - Authorization":k.value?"[server] - Components Docs":u.value&&(u.value["x-description-"+n.value]||u.value.description)||""});ts({title:U.value,meta:[{name:"description",content:$.value}],htmlAttrs:{lang:i.value},bodyAttrs:{class:"oapi"}});const R=l(()=>{if(r.value){if(r.value.servers&&r.value.servers[0])return r.value.servers[0].url??null;if(r.value[t.value]&&r.value[t.value].servers&&r.value[t.value].servers[0])return r.value[t.value].servers[0].url??null}if(o.value){if(o.value.servers&&o.value.servers[0])return o.value.servers[0].url??null;if(o.value[t.value]&&o.value[t.value].servers&&o.value[t.value].servers[0])return o.value[t.value].servers[0].url??null}let n=I.value;if(n>0&&a.value.servers&&!a.value.servers[n]&&(n=0),!a.value.servers||!a.value.servers[n])return"";if(a.value.servers[n].variables){const e=Object.values(a.value.servers[n].variables)??[];if(e&&e.length)return e[0].default}return a.value.servers[n].url??""});function L(n){I.value=n}function B(){var e;(((e=document.querySelector(".content-container"))==null?void 0:e.querySelectorAll("h1[id], h2[id], h3[id], h4[id]"))??[]).forEach(p=>{p.addEventListener("click",c=>{const x=p.getAttribute("id"),y=window.location.origin+window.location.pathname+"#"+x;f.copyToClipboard(y,c,!1),q.push({path:d.path,hash:"#"+x}),setTimeout(()=>{p.scrollIntoView({behavior:"smooth",block:"start"})},100)})})}function E(){if(d.hash)return;const n=document.querySelector(".oapi-content");n&&(n.scrollTop=0)}function O(){const n=JSON.stringify(a.value,null,4),e=new Blob([n],{type:"application/json"}),p=URL.createObjectURL(e),c=document.createElement("a");c.href=p,c.download=m.value+".json",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(p)}return Z(()=>{j.$on("downloadJsonDoc",O),j.$on("changeServer",L),E(),B()}),ss(()=>{j.$off("downloadJsonDoc",O),j.$off("changeServer",L)}),(n,e)=>{const p=J,c=z,x=F,y=Q,N=M,V=H,W=G;return v(),es("div",rs,[s(P)&&s(a).info?(v(),h(p,{key:0,info:s(a).info,servers:s(a).servers,"current-locale":s(i)},null,8,["info","servers","current-locale"])):s(w)&&s(a).components?(v(),h(c,{key:1,components:s(a).components,"current-locale":s(i)},null,8,["components","current-locale"])):s(k)&&s(a).components?(v(),h(x,{key:2,components:s(a).components,"current-locale":s(i)},null,8,["components","current-locale"])):s(u)?(v(),h(y,{key:3,route:s(u),"current-locale":s(i),method:s(t),components:s(a).components,url:s(g),path_doc:s(b),file:s(m),server:s(R),"sub-params":s(D)},null,8,["route","current-locale","method","components","url","path_doc","file","server","sub-params"])):s(o)?(v(),h(y,{key:4,route:s(o),"current-locale":s(i),method:s(t),components:s(a).components,url:s(g),path_doc:s(b),file:s(m),server:s(R),"sub-params":s(D)},null,8,["route","current-locale","method","components","url","path_doc","file","server","sub-params"])):(v(),h(N,{key:5})),T(W,null,{default:ns(()=>[T(V,{"current-locale":s(i),doc:s(a),path:s(b),file:s(m)},null,8,["current-locale","doc","path","file"])]),_:1})])}}});export{ds as default};
